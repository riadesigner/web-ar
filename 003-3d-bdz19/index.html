<!doctype HTML>
<html>
<link rel="icon" href="data:;base64,iVBORw0KGgo=">

<script src="js/aframe.min.js"></script>

<script src="js/aframe-ar.js"></script>

<script src="js/aframe-gif-shader.min.js"></script>
<script src="js/wad.js"></script>

<script src="js/aframe-extras.js"></script>
<script src="js/aframe-text-geometry-component.min.js"></script>


<body style="margin: 0px; overflow: hidden;">


<script>

// var NOW_PLAY_SOUND = 1;    
let bell1 = new Wad({source : 'snd/music-3.mp3'});
let bell2 = new Wad({source : 'snd/music-1.mp3'});
// document.addEventListener("click",function(){
//     console.log(bell)
//     if(NOW_PLAY_SOUND>0){        
//         bell.stop();    
//     }else{                
//         bell.play();    
//     }
//     NOW_PLAY_SOUND*=-1;
    
// });

AFRAME.registerComponent('registerevents', {
    init: function () 
    {
        let marker = this.el;

        marker.addEventListener('markerFound', function(e) {
            var id = e.srcElement.id;
            // console.log('e',e.srcElement.id);
            
            // markerVisible[ marker.id ] = true;
            // console.log( markerVisible );            

            if(id==='model-1'){
                bell1.play();    
            }else{
              bell2.play();
            }
            // console.log('markerFound',marker)
        });

        marker.addEventListener('markerLost', function(e) {
            // markerVisible[ marker.id ] = false;
            // console.log( markerVisible );
            var id = e.srcElement.id;
            
            if(id==='model-1'){
                bell1.stop();    
            }else{
              bell2.stop();
            }
        
            // console.log('markerLost',marker)
        });
    }
});    

</script>



<a-scene embedded vr-mode-ui="enabled: false;" arjs="debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;" shadow="type: basic; castShadow: true">

    <a-assets>        
    </a-assets>

    <a-marker type="barcode" value="2" registerevents id="model-1">        
        <a-entity light="type: ambient; intensity: 2.5;"></a-entity>
        <a-entity light="type: directional;castShadow: false;intensity: 3;shadowCameraVisible: false;"position="0 40 15 "></a-entity>
        <a-entity gltf-model="models/project1.gltf" scale="0.002 0.002 0.002" animation-mixer position="-.5 .5 1"></a-entity>
    </a-marker>


    <a-marker type="barcode" value="3" registerevents id="model-2" >
        <a-entity light="type: ambient; intensity: 2.5;"></a-entity>
        <a-entity light="type: directional; castShadow: false; intensity: 2; shadowCameraVisible: false;"position="0 40 15"></a-entity>        
        <a-entity gltf-model="models/diana.gltf" scale="0.002 0.002 0.002" animation-mixer position=".55 0 .55"  ></a-entity>            
    </a-marker>

    <a-entity camera></a-entity>
    
</a-scene>




</body>
</html>